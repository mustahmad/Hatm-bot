# –•–∞—Ç–º –ë–æ—Ç - Telegram –±–æ—Ç –¥–ª—è –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –ö–æ—Ä–∞–Ω–∞

Telegram-–±–æ—Ç –∏ Web App –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –ö–æ—Ä–∞–Ω–∞ (—Ö–∞—Ç–º) –≥—Ä—É–ø–ø–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ —Ö–∞—Ç–º–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ 30 –¥–∂—É–∑–æ–≤ –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- –ö—Ä—É–≥–æ–≤–æ–π —Ç—Ä–µ–∫–µ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –¥–∂—É–∑–∞—Ö
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ—á–∏—Ç–∞–ª" –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ –¥–æ–ª–≥–æ–≤
- –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π Apple-–ø–æ–¥–æ–±–Ω—ã–π –¥–∏–∑–∞–π–Ω

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
hatm-bot/
‚îú‚îÄ‚îÄ backend/           # Python FastAPI + aiogram
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/       # REST API endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bot/       # Telegram bot handlers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/    # SQLAlchemy models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/   # Pydantic schemas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/  # Business logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ frontend/          # React + TypeScript + Vite
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ README.md
```

---

## –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)

2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`

3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
   - –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `–•–∞—Ç–º –ë–æ—Ç`)
   - –í–≤–µ–¥–∏—Ç–µ username –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `hatm_quran_bot`)

4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–∑–∂–µ. –í—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:
   ```
   123456789:ABCdefGHIjklMNOpqrsTUVwxyz
   ```

5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Web App –¥–ª—è –±–æ—Ç–∞:
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots` –±–æ—Ç—É @BotFather
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
   - –ù–∞–∂–º–∏—Ç–µ `Bot Settings` ‚Üí `Menu Button` ‚Üí `Configure menu button`
   - –í–≤–µ–¥–∏—Ç–µ URL –≤–∞—à–µ–≥–æ Web App (–Ω–∞—Å—Ç—Ä–æ–∏–º –ø–æ–∑–∂–µ)

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Python 3.11+
- Node.js 18+
- npm –∏–ª–∏ yarn

#### Backend:

```bash
cd hatm-bot/backend

# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ
# –ù–∞ macOS/Linux:
source venv/bin/activate
# –ù–∞ Windows:
venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

#### Frontend:

```bash
cd hatm-bot/frontend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Backend (.env):

```bash
cd hatm-bot/backend
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`:

```env
# –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –æ—Ç @BotFather
BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz

# URL –≤–∞—à–µ–≥–æ Web App (–Ω–∞—Å—Ç—Ä–æ–∏–º –≤ —à–∞–≥–µ 5)
WEBAPP_URL=https://your-ngrok-url.ngrok.io

# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (true –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
DEV_MODE=true

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
DATABASE_URL=sqlite:///./hatm.db
```

#### Frontend (.env):

```bash
cd hatm-bot/frontend
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`:

```env
VITE_API_URL=http://localhost:8000
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

#### –¢–µ—Ä–º–∏–Ω–∞–ª 1 - Backend:

```bash
cd hatm-bot/backend
source venv/bin/activate  # –∏–ª–∏ venv\Scripts\activate –Ω–∞ Windows
python -m app.main
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:8000`

#### –¢–µ—Ä–º–∏–Ω–∞–ª 2 - Frontend:

```bash
cd hatm-bot/frontend
npm run dev
```

Web App –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:5173`

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS –¥–ª—è Telegram (ngrok)

Telegram —Ç—Ä–µ–±—É–µ—Ç HTTPS –¥–ª—è Web App. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç—É–Ω–Ω–µ–ª—è.

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok: https://ngrok.com/download

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok –¥–ª—è frontend:
   ```bash
   ngrok http 5173
   ```

3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok.io`)

4. –û–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

   **Backend `.env`:**
   ```env
   WEBAPP_URL=https://abc123.ngrok.io
   ```

   **Frontend `.env`:**
   ```env
   VITE_API_URL=https://your-backend-ngrok-url.ngrok.io
   ```

5. –ï—Å–ª–∏ backend —Ç–æ–∂–µ –Ω—É–∂–µ–Ω —á–µ—Ä–µ–∑ HTTPS, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ç–æ—Ä–æ–π ngrok:
   ```bash
   ngrok http 8000
   ```

6. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Menu Button –≤ @BotFather:
   - `/mybots` ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí `Bot Settings` ‚Üí `Menu Button` ‚Üí `Configure menu button`
   - URL: –≤–∞—à ngrok URL –¥–ª—è frontend
   - Text: `–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ`

### –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram

2. –ù–∞–∂–º–∏—Ç–µ `/start`

3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" –∏–ª–∏ –∫–Ω–æ–ø–∫—É –≤ –º–µ–Ω—é

4. –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É, –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π –ø–æ –∫–æ–¥—É, —Å–æ–∑–¥–∞–π—Ç–µ —Ö–∞—Ç–º!

---

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Production)

### –í–∞—Ä–∏–∞–Ω—Ç 1: VPS (DigitalOcean, Hetzner, etc.)

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:**
   ```bash
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
   sudo apt update
   sudo apt install python3.11 python3.11-venv nodejs npm nginx certbot
   ```

2. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone your-repo-url hatm-bot
   cd hatm-bot
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Backend:**
   ```bash
   cd backend
   python3.11 -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt

   # –°–æ–∑–¥–∞–π—Ç–µ .env —Å production –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
   cp .env.example .env
   nano .env  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ BOT_TOKEN –∏ WEBAPP_URL
   ```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Frontend:**
   ```bash
   cd frontend
   npm install
   npm run build  # –°–æ–∑–¥–∞—Å—Ç –ø–∞–ø–∫—É dist/
   ```

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx:**
   ```nginx
   # /etc/nginx/sites-available/hatm

   server {
       listen 80;
       server_name your-domain.com;

       # Frontend
       location / {
           root /path/to/hatm-bot/frontend/dist;
           try_files $uri $uri/ /index.html;
       }

       # API
       location /api {
           proxy_pass http://127.0.0.1:8000;
           proxy_http_version 1.1;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
       }
   }
   ```

6. **–ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:**
   ```bash
   sudo certbot --nginx -d your-domain.com
   ```

7. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ backend –∫–∞–∫ —Å–µ—Ä–≤–∏—Å:**
   ```bash
   # /etc/systemd/system/hatm-bot.service

   [Unit]
   Description=Hatm Bot
   After=network.target

   [Service]
   User=www-data
   WorkingDirectory=/path/to/hatm-bot/backend
   Environment="PATH=/path/to/hatm-bot/backend/venv/bin"
   ExecStart=/path/to/hatm-bot/backend/venv/bin/python -m app.main
   Restart=always

   [Install]
   WantedBy=multi-user.target
   ```

   ```bash
   sudo systemctl enable hatm-bot
   sudo systemctl start hatm-bot
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Railway / Render / Fly.io

–≠—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –ø—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –£–∫–∞–∂–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (BOT_TOKEN, WEBAPP_URL)
3. –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç Python/Node.js –ø—Ä–æ–µ–∫—Ç—ã
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –∏ SSL

---

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã, –æ—Ç–∫—Ä—ã—Ç–∏–µ Web App
- `/myjuzs` - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –¥–∂—É–∑—ã
- `/debts` - –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ–ª–≥–∏

## API Endpoints

- `GET /api/users/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `GET /api/groups` - –°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/groups` - –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É
- `POST /api/groups/join` - –í—Å—Ç—É–ø–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É
- `POST /api/groups/{id}/hatms` - –°–æ–∑–¥–∞—Ç—å —Ö–∞—Ç–º
- `POST /api/hatms/{id}/start` - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ö–∞—Ç–º
- `GET /api/hatms/{id}/progress` - –ü—Ä–æ–≥—Ä–µ—Å—Å —Ö–∞—Ç–º–∞
- `POST /api/juzs/{id}/complete` - –û—Ç–º–µ—Ç–∏—Ç—å –¥–∂—É–∑ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend:** Python, FastAPI, aiogram 3, SQLAlchemy, SQLite
- **Frontend:** React 18, TypeScript, Vite, Tailwind CSS, Framer Motion
- **Telegram:** Bot API, Mini Apps

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

---

–ë–∞—Ä–∞–∫–∞–ª–ª–∞—Ö—É —Ñ–∏–∫—É–º! ü§≤
